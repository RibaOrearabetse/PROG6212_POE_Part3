@model Contract_Monthly_Claim_System__CMCS_.Models.Claim
@{
    ViewData["Title"] = "Claim Details";
}

<h2>Claim Details</h2>

<div class="card">
    <div class="card-body">
        <dl class="row">
            <dt class="col-sm-2">Claim ID</dt>
            <dd class="col-sm-10">@Model.ClaimID</dd>

            <dt class="col-sm-2">Claim Date</dt>
            <dd class="col-sm-10">@Model.ClaimDate.ToShortDateString()</dd>

            <dt class="col-sm-2">Status</dt>
            <dd class="col-sm-10">
                <span class="@(Model.ClaimStatus.ToLower() == "pending" ? "status-pending" :
                                                   Model.ClaimStatus.ToLower() == "approved" ? "status-approved" : "status-rejected")">
                    @Model.ClaimStatus
                </span>
            </dd>

            <dt class="col-sm-2">Hours Worked</dt>
            <dd class="col-sm-10">@Model.HoursWorked</dd>

            <dt class="col-sm-2">Hourly Rate</dt>
            <dd class="col-sm-10">R @Model.HourlyRate.ToString("N2")</dd>

            <dt class="col-sm-2">Total Amount</dt>
            <dd class="col-sm-10">R @Model.TotalAmount.ToString("N2")</dd>

            <dt class="col-sm-2">Submission Date</dt>
            <dd class="col-sm-10">@Model.SubmissionDate.ToShortDateString()</dd>

            <dt class="col-sm-2">User ID</dt>
            <dd class="col-sm-10">@Model.UserID</dd>
        </dl>
    </div>
</div>

@if (TempData["SuccessMessage"] != null)
{
    <div class="alert alert-success alert-dismissible fade show" role="alert">
        <i class="fas fa-check-circle me-2"></i>
        @TempData["SuccessMessage"]
        <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
    </div>
}

@if (TempData["ErrorMessage"] != null)
{
    <div class="alert alert-danger alert-dismissible fade show" role="alert">
        <i class="fas fa-exclamation-triangle me-2"></i>
        @TempData["ErrorMessage"]
        <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
    </div>
}

<div class="mt-3">
    <a asp-action="Edit" asp-route-id="@Model.ClaimID" class="btn btn-warning">Edit</a>
    @if (Model.ClaimStatus == "Pending")
    {
        <form asp-action="Approve" asp-route-id="@Model.ClaimID" method="post" style="display: inline;">
            @Html.AntiForgeryToken()
            <button type="submit" class="btn btn-success" onclick="return confirm('Are you sure you want to approve Claim #@Model.ClaimID?');">
                Approve
            </button>
        </form>
    }
    <a asp-action="Index" class="btn btn-secondary">Back to List</a>
</div>